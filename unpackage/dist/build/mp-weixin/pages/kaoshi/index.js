(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/kaoshi/index"],{"1b41":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=i(n("a34a")),s=n("e0b6"),r=(n("26cb"),i(n("ad87")));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,u,s,r,i){try{var o=e[r](i),a=o.value}catch(c){return void n(c)}o.done?t(a):Promise.resolve(a).then(u,s)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(u,s){var r=e.apply(t,n);function i(e){o(r,u,s,i,a,"next",e)}function a(e){o(r,u,s,i,a,"throw",e)}i(void 0)}))}}var c={mixins:[r.default],components:{},data:function(){return{jieguo:{fraction:0,noRightNum:0,rightNum:0},status:"noLogin",shijuandata:[],currentIndex:0,isShowjiexi:!1,selectAnswer:""}},computed:{userInfo:function(){return this.$store.state.userInfo}},watch:{userInfo:function(e,t){console.log("newValue",e),e&&this.isExam(),console.log("newValue",e)}},onShow:function(){var e=this;return a(u.default.mark((function t(){var n,r;return u.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("userInfo",e.userInfo),!e.userInfo.openid){t.next=7;break}return n=e.userInfo.openid,t.next=5,(0,s.yunRequest)("nx-user","getUserInfo",{openid:n},{showLoading:!0});case 5:r=t.sent,r.userInfo&&e.$store.dispatch("setUserData",r.userInfo);case 7:case"end":return t.stop()}}),t)})))()},onLoad:function(){this.isExam()},methods:{isExam:function(){this.status=this.$tools.isLogin()?"Login":"noLogin",this.$tools.isLogin()&&this.getNew()},getNew:function(){var e=this;return a(u.default.mark((function t(){var n,r,i,o;return u.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.userInfo.openid,t.next=3,(0,s.yunRequest)("examLog","getNew",{openid:n},{showLoading:!0});case 3:if(r=t.sent,console.log("res",r),!r.result){t.next=13;break}if(i=r.result.examTime.substring(0,10),o=e.datastime("yous").substring(0,10),console.log("dataDay",i),i!=o){t.next=13;break}return e.status="Result",e.jieguo=r.result,t.abrupt("return");case 13:e.getTestQuestion();case 14:case"end":return t.stop()}}),t)})))()},getTestQuestion:function(){var e=this;return a(u.default.mark((function t(){var n;return u.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,s.yunRequest)("getTestQuestion","getList",{},{showLoading:!0});case 2:n=t.sent,n.result.length&&(e.shijuandata=n.result);case 4:case"end":return t.stop()}}),t)})))()},reset:function(){wx.showToast({title:"请明天再来",icon:"none"})},dati:function(e){if(!this.isShowjiexi){console.log("shijuandata",this.shijuandata),this.selectAnswer=e;var t=this.shijuandata[this.currentIndex].answer;t==e?(this.jieguo.fraction+=10,++this.jieguo.rightNum,this.next()):(++this.jieguo.noRightNum,this.isShowjiexi=!0)}},next:function(){this.isShowjiexi=!1,++this.currentIndex,10==this.currentIndex&&this.showResult()},showResult:function(){var e=this;return a(u.default.mark((function t(){var n,r;return u.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.status="Result",n=e.userInfo.openid,r=e.datastime("yous"),t.next=5,(0,s.yunRequest)("examLog","add",{openid:n,examTime:r,fraction:e.jieguo.fraction,rightNum:e.jieguo.rightNum,noRightNum:e.jieguo.noRightNum},{showLoading:!0});case 5:return t.sent,t.next=8,(0,s.yunRequest)("nx-user","updateUserInfo",{id:e.userInfo._id,sum:e.userInfo.sum+e.jieguo.fraction,examNum:++e.userInfo.examNum},{showLoading:!0});case 8:t.sent;case 9:case"end":return t.stop()}}),t)})))()},datastime:function(e){var t=new Date,n=t.getFullYear(),u=parseInt(t.getMonth())+1;u<=9&&(u="0"+u);var s=t.getDate();s<=9&&(s="0"+s);var r=t.getHours();r<=9&&(r="0"+r);var i=t.getMinutes();i<=9&&(i="0"+i);var o=t.getSeconds();return o<=9&&(o="0"+o),"nyr"==e?n+"年"+u+"月"+s+"日":"yous"==e?n+"-"+u+"-"+s+" "+r+":"+i+":"+o:"int"==e?parseInt(n+""+u+s+r+i):n+"年"+u+"月"+s+"日 "+r+":"+i+":"+o}}};t.default=c},2440:function(e,t,n){"use strict";n.r(t);var u=n("b3a5"),s=n("3485");for(var r in s)"default"!==r&&function(e){n.d(t,e,(function(){return s[e]}))}(r);n("534f");var i,o=n("f0c5"),a=Object(o["a"])(s["default"],u["b"],u["c"],!1,null,"61210a28",null,!1,u["a"],i);t["default"]=a.exports},3485:function(e,t,n){"use strict";n.r(t);var u=n("1b41"),s=n.n(u);for(var r in u)"default"!==r&&function(e){n.d(t,e,(function(){return u[e]}))}(r);t["default"]=s.a},"35f1":function(e,t,n){},"534f":function(e,t,n){"use strict";var u=n("35f1"),s=n.n(u);s.a},b3a5:function(e,t,n){"use strict";var u;n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return u}));var s=function(){var e=this,t=e.$createElement;e._self._c},r=[]},cde6:function(e,t,n){"use strict";(function(e){n("30a4");u(n("66fd"));var t=u(n("2440"));function u(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])}},[["cde6","common/runtime","common/vendor"]]]);